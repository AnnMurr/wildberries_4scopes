var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},s=e.parcelRequire5951;null==s&&((s=function(e){if(e in t)return t[e].exports;if(e in n){var s=n[e];delete n[e];var o={id:e,exports:{}};return t[e]=o,s.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},e.parcelRequire5951=s);let o=0,r=0;function c(e,t,n){"fixed"===e&&(o=window.scrollY||document.documentElement.scrollTop,r=window.scrollX||document.documentElement.scrollLeft),body.style.position=e,body.style.width=t,body.style.overflowY=n,"fixed"!==e&&window.scrollTo(r,o)}const a=document.querySelector(".burger"),i=document.querySelector(".footer-bar__sidebar-btn"),l=document.querySelector(".sidebar"),u=document.querySelector(".sidebar .btn-close");document.getElementById("body");function d(){l.classList.contains("sidebar_active")?(l.classList.remove("sidebar_active"),c(null,null,null)):(l.classList.add("sidebar_active"),c("fixed","100%","scroll"),m())}function m(){l.classList.contains("sidebar_active")?document.addEventListener("click",_):document.removeEventListener("click",_)}function _(e){l.contains(e.target)||a.contains(e.target)||i.contains(e.target)||(l.classList.remove("sidebar_active"),c(null,null,null),m())}a.addEventListener("click",d),i.addEventListener("click",d),u.addEventListener("click",(function(){l.classList.contains("sidebar_active")&&(l.classList.remove("sidebar_active"),c(null,null,null))}));var p=s("02iEE");const b=[{tag:"input",class:"user__input",attributes:[{required:!0},{placeholder:"Логин"},{type:"text"}]},{tag:"span",class:["error-message","error-message_registration-login"]},{tag:"input",class:"user__input",attributes:[{required:!0},{placeholder:"Пароль"},{type:"password"},{"data-input":"1"}]},{tag:"button",class:"btn-show-password",attributes:[{href:"#"},{"data-btn":"1"},{type:"button"}],text:"показать пароль"},{tag:"span",class:["error-message","error-message_registration-password-first"]},{tag:"input",class:"user__input",attributes:[{required:!0},{placeholder:"Повторите пароль"},{type:"password"},{"data-input":"2"}]},{tag:"button",class:"btn-show-password",attributes:[{href:"#"},{"data-btn":"2"},{type:"button"}],text:"показать пароль"},{tag:"span",class:["error-message","error-message_registration-password-second"]},{tag:"button",class:["btn","registration__btn"],content:"Зарегистрироваться",attributes:[{type:"submit"}]}],v=[{tag:"input",class:"user__login-input",attributes:[{required:!0},{placeholder:"Логин"},{type:"text"}]},{tag:"span",class:["error-message","error-message_login"]},{tag:"input",class:"user__login-input",attributes:[{required:!0},{placeholder:"Введите пароль"},{type:"password"},{"data-input":"input"}]},{tag:"button",class:"btn-show-password",attributes:[{href:"#"},{"data-btn":"password"},{type:"button"}],text:"показать пароль"},{tag:"span",class:["error-message","error-message_password"]},{tag:"button",class:["btn","login-btn"],content:"Войти",attributes:[{type:"submit"}]}];var g=s("3LgNA");function L(e,t){t.forEach((t=>{const n=document.createElement(t.tag);Array.isArray(t.class)&&t.class.length>0?t.class.forEach((e=>n.classList.add(e))):n.classList.add(t.class),t.id&&(n.id=t.id),t.text&&(n.textContent=t.text),t.content&&(n.textContent=t.content),t.dataset&&(n.dataset.data=t.dataset.data),t.attributes&&t.attributes.length>0&&t.attributes.forEach((e=>{const[t,s]=Object.entries(e)[0];n.setAttribute(t,s)})),e.appendChild(n)}))}function f(e,t,n){const s=document.createElement("form");s.classList.add(e),L(s,t),n.appendChild(s)}g=s("3LgNA"),p=s("02iEE"),g=s("3LgNA");function y(){(0,g.removeTokenStore)(),localStorage.setItem("basketStore",JSON.stringify([])),location.reload()}const S=document.querySelector(".user__submenu");async function h(e){const t=await p.AuthenticationApi.getUserByToken(e);if(t){const e=S.children;S.removeChild(e[1]),S.removeChild(e[1]),e[0].querySelector(".modal-header__title > h2").textContent=`Здравствуйте, ${t.login}!`;const n=document.createElement("button");n.type="button",n.classList.add("btn","user__submenu-btn-exit"),n.textContent="Выйти из аккаунта",S.appendChild(n),n.addEventListener("click",y)}}const w=document.querySelector(".user-btn");function k(){const e=(0,g.getTokenStore)();e?(h(e),w.classList.add("user-btn_authorized")):w.classList.remove("user-btn_authorized")}function E(e,t){const n=document.querySelector(e).parentNode;n.innerHTML=null;const s=document.createElement("div"),o=document.createElement("span");s.classList.add("success-container"),o.classList.add("success-message"),o.textContent=t,s.appendChild(o),n.append(s),setTimeout((function(){n.remove()}),3e3)}var q=s("77CKc");const C=document.querySelector(".user__registration"),x=document.querySelector(".user__registration-btn-close"),T=document.querySelector(".user__submenu-btn-registration"),A=document.querySelector(".user-btn");function O(){C.classList.add("user__registration_active"),C.classList.contains("user__registration_active")&&(document.addEventListener("click",N),A.classList.add("user-btn_active"),document.querySelector(".registration__btn").addEventListener("click",M))}function N(e){C.contains(e.target)||T.contains(e.target)||C.classList.remove("user__registration_active"),C.classList.contains("user__registration_active")||(document.removeEventListener("click",N),A.classList.remove("user-btn_active"),registrationForm=document.querySelector(".user__registration-form"),registrationForm&&(registrationForm.reset(),document.querySelector('[data-input="1"]').type="password",document.querySelector('[data-input="2"]').type="password",document.querySelector('[data-btn="1"]').textContent="показать пароль",document.querySelector('[data-btn="2"]').textContent="показать пароль",I()))}function I(){const e=document.querySelector(".error-message_registration-login"),t=document.querySelector(".error-message_registration-password-first"),n=document.querySelector(".error-message_registration-password-second");e.textContent=null,t.textContent=null,n.textContent=null}function M(e){e.preventDefault(),async function(){let e=document.querySelectorAll(".user__input"),t=[];const n=document.querySelector(".error-message_registration-login"),s=document.querySelector(".error-message_registration-password-first"),o=document.querySelector(".error-message_registration-password-second");e.forEach((e=>t.push(e.value)));const r={login:t[0],password:t[1],token:Math.random()*(new Date).getTime()};let c=await p.AuthenticationApi.getUserByLogin(r.login);const a=(e,t,n,s)=>e.textContent=`${s} должен содержать от ${t} до ${n} символов`,i=r.password.length,l=r.login.length;r.login.match(/[!@#$%^&*()[\]{}|\\;:'"<>.,\/?`~=+\-№_]/)?n.textContent="Логин не должен содержать пробелы и символы: !@#$%^&*()-_+={}[]|\\;:'\"<>.,/?`~№":i<8||i>20?a(s,8,20,"Пароль"):l<3||l>20?a(n,3,20,"Логин"):t[1]!==t[2]?(s.textContent="Пароль не совпадает",o.textContent="Пароль не совпадает"):void 0!==c?n.textContent=`Пользователь с логином "${r.login}" уже зарегистрирован`:(p.AuthenticationApi.setUser(r.login,r.password,r.token).then((()=>E(".user__registration-form","Регистрация прошла успешно ☑"))),(0,g.setTokenStore)(r.token),setTimeout((()=>{k(),(0,q.linkStoreToUserData)()}),3e3))}(),I()}x.addEventListener("click",(function(){C.classList.remove("user__registration_active")})),document.addEventListener("DOMContentLoaded",(function(){f("user__registration-form",b,C),function(){const e=document.querySelector('[data-input="1"]'),t=document.querySelector('[data-input="2"]'),n=document.querySelector('[data-btn="1"]'),s=document.querySelector('[data-btn="2"]');document.querySelectorAll(".btn-show-password").forEach((o=>{o.addEventListener("click",(function(o){let r="1"===o.target.getAttribute("data-btn")?e:t,c="password"===r.type?"text":"password";r.type=c;let a="1"===o.target.getAttribute("data-btn")?n:s,i="показать пароль"===a.textContent?"скрыть пароль":"показать пароль";a.textContent=i}))}))}(),k()}));p=s("02iEE"),g=s("3LgNA");const D=(e,t)=>{const n=document.getElementById("alert-container"),s=document.createElement("div"),o=document.createElement("span");o.innerText=t,s.classList.add("alert"),s.classList.add(`${e}`),s.appendChild(o),n.appendChild(s),setTimeout((()=>{s.classList.add("remove"),setTimeout((()=>{s.remove()}),300)}),3e3)};class ${static error(e){D("error",e)}static warning(e){D("warning",e)}static access(e){D("access",e)}}const U=document.querySelector(".user__login"),H=document.querySelector(".user__login-btn-close"),B=document.querySelector(".user__submenu-btn-login"),J=document.querySelector(".user-btn");function j(){U.classList.add("user__login_active"),U.classList.contains("user__login_active")&&document.addEventListener("click",F),J.classList.add("user-btn_active"),document.querySelector(".login-btn").addEventListener("click",K)}function F(e){U.contains(e.target)||B.contains(e.target)||U.classList.remove("user__login_active"),U.classList.contains("user__login_active")||(document.removeEventListener("click",F),J.classList.remove("user-btn_active"),function(){const e=document.querySelector(".user__login-form");if(e){e.reset();document.querySelector('[data-btn="password"]').textContent="показать пароль",document.querySelector('[data-input="input"]').type="password";W()}}())}function W(){const e=document.querySelector(".error-message_login"),t=document.querySelector(".error-message_password");e.textContent=null,t.textContent=null}function K(e){e.preventDefault(),async function(){let e=document.querySelectorAll(".user__login-input"),t=[];const n=document.querySelector(".error-message_login"),s=document.querySelector(".error-message_password");e.forEach((e=>{t.push(e.value)}));let o=await p.AuthenticationApi.getUserByLogin(t[0]);o&&o.password===t[1]?(E(".user__login-form","Вы вошли ✓"),$.access("Вы вошли ✓"),(0,g.setTokenStore)(o.token),localStorage.setItem("basketStore",JSON.stringify(o.orders)),k()):(n.textContent="Неверный логин или пароль",s.textContent="Неверный логин или пароль")}(),W()}H.addEventListener("click",(function(){U.classList.remove("user__login_active"),J.classList.remove("user-btn_active")})),document.addEventListener("DOMContentLoaded",(function(){f("user__login-form",v,U),function(){const e=document.querySelector('[data-btn="password"]'),t=document.querySelector('[data-input="input"]');e.addEventListener("click",(function(){neededType="password"===t.type?"text":"password",t.type=neededType,neededText="показать пароль"===e.textContent?"скрыть пароль":"показать пароль",e.textContent=neededText}))}()}));const Y=document.querySelector(".user-btn"),z=document.querySelector(".user__submenu"),P=document.querySelector(".user__submenu-btn-close"),R=document.querySelector(".user__submenu-btn-registration"),Z=document.querySelector(".user__submenu-btn-login"),V=document.querySelector(".footer-bar__user");function X(){z.classList.contains("user__submenu_active")?(Y.classList.add("user-btn_active"),document.addEventListener("click",G)):(Y.classList.remove("user-btn_active"),document.removeEventListener("click",G))}function G(e){z.contains(e.target)||Y.contains(e.target)||V.contains(e.target)||e.target.classList.contains("basket__btn-order")||(z.classList.remove("user__submenu_active"),X())}Y.addEventListener("click",(function(){z.classList.toggle("user__submenu_active"),X()})),P.addEventListener("click",(function(){z.classList.remove("user__submenu_active"),X()})),R.addEventListener("click",(function(){z.classList.remove("user__submenu_active"),X(),O()})),Z.addEventListener("click",(function(){z.classList.remove("user__submenu_active"),X(),j()}));const Q=document.querySelector(".footer-bar__user"),ee=document.querySelector(".user__submenu"),te=document.querySelectorAll(".btn-close"),ne=document.querySelector(".user__registration"),se=document.querySelector(".user__login");Q.addEventListener("click",(function(){ee.classList.contains("user__submenu_active")||ne.classList.contains("user__registration_active")||se.classList.contains("user__login_active")?ee.classList.contains("user__submenu_active")&&(ee.classList.remove("user__submenu_active"),c(null,null,null),X()):(ee.classList.add("user__submenu_active"),c("fixed","100%","scroll"),X())})),te.forEach((e=>e.addEventListener("click",(()=>c(null,null,null)))));q=s("77CKc"),g=s("3LgNA");const oe=document.querySelector(".basket__modal"),re=document.querySelector(".footer-bar__basket-btn");function ce(){const e=ue();oe.classList.contains("basket__modal_active")?oe.classList.remove("basket__modal_active"):(e.length>0?(de(),be("block","flex"),ge()):de(),oe.classList.add("basket__modal_active"),ie())}function ae(){const e=document.querySelector(".basket-block");oe.classList.remove("basket__modal_active"),e.innerHTML=null,c(null,null,null)}function ie(){oe.classList.contains("basket__modal_active")?document.addEventListener("click",le):document.removeEventListener("click",le)}function le(e){oe.contains(e.target)||e.target.classList.contains("basket-btn")||e.target.classList.contains("basket__list-item-btn-remove")||re.contains(e.target)||(oe.classList.remove("basket__modal_active"),ie())}function ue(){const e=localStorage.getItem("basketStore");return JSON.parse(e)||[]}function de(){const e=document.querySelector(".basket-block"),t=document.createElement("ul");t.classList.add("basket__list"),e.appendChild(t),me("☹<br>Корзина пуста")}function me(e){const t=ue(),n=document.querySelector(".basket__list");0===t.length?n.innerHTML=e:(n.textContent=null,t.forEach((e=>{n.append(function(e){const t=document.createElement("li");t.classList.add("basket__list-item");const n=function(){const e=document.createElement("div");return e.classList.add("basket__list-item-wrapper"),e}();return n.append(function(e){const t=document.createElement("div");t.classList.add("basket__list-item-price");const n=document.createElement("h5");return n.textContent=""+(e.price+"$"),t.append(n),t}(e),function(e){const t=document.createElement("button");return t.classList.add("icon-trash","basket__list-item-btn-remove"),t.setAttribute("data-id",`${e.id}`),t.addEventListener("click",_e),t}(e)),t.append(function(e){const t=document.createElement("div");t.classList.add("basket__list-item-title");const n=document.createElement("h5");return n.textContent=`${e.title}`,t.append(n),t}(e),n),t}(e))})))}function _e(e){const t=document.querySelector(".basket__list");if(e.target.classList.contains("basket__list-item-btn-remove")){!function(e){let t=localStorage.getItem("basketStore");if(t){let n=JSON.parse(t);const s=n.findIndex((t=>t.id===e));-1!==s&&(n.splice(s,1),localStorage.setItem("basketStore",JSON.stringify(n)),(0,q.linkStoreToUserData)())}}(e.target.dataset.id),e.target.closest(".basket__list-item").remove(),Le(),ge()}0===t.children.length&&(me("☹<br>Корзина пуста"),be("none","none"))}function pe(){const e=document.querySelectorAll(".basket__list-item");localStorage.setItem("basketStore",JSON.stringify([])),e.forEach((e=>e.remove())),me("☹<br>Корзина пуста"),(0,q.linkStoreToUserData)(),be("none","none")}function be(e,t){const n=document.querySelector(".basket__btn-delete-all"),s=document.querySelector(".basket__footer");n.style.display=e,s.style.display=t}function ve(){const e=document.querySelector(".user__submenu");(0,g.getTokenStore)()?(localStorage.setItem("basketStore",JSON.stringify([])),(0,q.linkStoreToUserData)(),be("none","none"),me("Заказ успешно создан 📦")):(oe.classList.remove("basket__modal_active"),e.classList.add("user__submenu_active"),X())}function ge(){const e=document.querySelector(".basket__total-price-value"),t=Le();e.innerText=` ${t} $`}function Le(){const e=JSON.parse(localStorage.getItem("basketStore"));let t=0;return e.forEach((e=>{t+=e.price})),t}re.addEventListener("click",ce),re.addEventListener("click",(function(){oe.classList.contains("basket__modal_active")?c("fixed","100%","scroll"):c(null,null,null)})),document.querySelector(".basket-btn").addEventListener("click",ce),document.addEventListener("DOMContentLoaded",(function(){!function(){const e=document.createElement("div");e.classList.add("modal-header"),e.innerHTML='\n\t\t<div class="modal-header__title">\n\t\t<h2>Корзина</h2>\n\t\t</div>\n\t\t<button class="btn-close basket__modal-btn-close"></button>\n\t\t',oe.appendChild(e);document.querySelector(".basket__modal-btn-close").addEventListener("click",ae)}(),function(){const e=document.createElement("div");e.classList.add("basket-block"),oe.appendChild(e)}(),function(){const e=document.createElement("button");e.classList.add("btn","basket__btn-delete-all"),e.innerText="Очистить корзину",e.addEventListener("click",pe),oe.appendChild(e)}(),function(){const e=ue(),t=document.createElement("div");t.classList.add("basket__footer"),t.innerHTML='\n\t<button type="button" class="btn basket__btn-order">Заказать</button>\n\t <div class="basket__total-price">\n\t  <h4 class="basket__total-price-title">Итого:</h4>\n\t  <h4 class="basket__total-price-value"></h4>\n\t </div>\n\t',oe.appendChild(t);document.querySelector(".basket__btn-order").addEventListener("click",ve),0===e.length&&be("none","none")}()}));class fe{static imagesUrlApi="https://646e07219c677e23218ae1e2.mockapi.io/users/images";static async getImages(){return await fetch(this.imagesUrlApi).then((e=>e.json())).catch((e=>console.error(`Произошла ошибка при загрузке изображения: ${e}`)))}}const ye=document.querySelector(".swiper-wrapper");function Se(e){ye.appendChild(e),new Swiper(".mySwiper",{slidesPerView:1,spaceBetween:0,loop:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},autoplay:{delay:2e3,disableOnInteraction:!0},speed:1500})}document.addEventListener("DOMContentLoaded",(async function(){await fe.getImages().then((e=>{e.forEach((e=>{!function(e,t){const n=document.createElement("div");n.classList.add("swiper-slide");const s=document.createElement("img");s.alt=t,s.src=e,s.loading="eager",n.append(s),Se(n)}(e.url,e.alt)}))})).catch((e=>{throw e}))}));var he=s("8fKNq");function we(){return fetch("https://646f451109ff19b12086e48a.mockapi.io/wildberries/cards").then((e=>e.json())).then((e=>(he.CardsStore.setCards(e),e))).catch((e=>{throw e}))}var ke=s("2bZdl");const Ee=document.querySelector(".search"),qe=document.querySelector(".search__input"),Ce=document.querySelector(".search-btn"),xe=document.querySelector(".cards__inner");let Te,Ae=[],Oe=[];function Ne(){document.querySelector(".search__list")&&document.addEventListener("click",Ie)}function Ie(e){if(e.target!==qe){let e=document.querySelector(".search__list");e&&e.remove(),document.removeEventListener("click",Ie)}}function Me(e){xe.innerHTML=null;let t=[];Te.forEach((n=>{n.title.toLowerCase().startsWith(e.toLowerCase())&&t.push(n)})),(0,ke.addCards)(t)}function De(e,t){e.forEach((e=>{const n=document.createElement("li");n.classList.add("search__list-item"),n.textContent=e,t.appendChild(n),document.querySelectorAll(".search__list-item").forEach((e=>{e.addEventListener("click",(function(e){xe.innerHTML=null;const t=e.target.textContent;let n=[];Te.forEach((e=>{e.title.toLowerCase()===t.toLowerCase()&&n.push(e),e.brand.toLowerCase()===t.toLowerCase()&&n.push(e)})),(0,ke.addCards)(n)}))}))}))}qe.addEventListener("input",(function(e){let t=e.target.value,n=Ae.filter((e=>e.toLowerCase().startsWith(t.toLowerCase()))),s=Oe.filter((e=>e.toLowerCase().startsWith(t.toLowerCase()))),o=document.querySelector(".search__list");if(!t)return void(o&&(o.remove(),Ne()));o?o.innerHTML=null:(o=document.createElement("ul"),o.classList.add("search__list"),Ee.appendChild(o),Ne());r=t,qe.addEventListener("keyup",(e=>{"Enter"===e.code&&(Me(r),Ie({target:document}))})),Ce.addEventListener("click",(()=>Me(t))),De(n,o),De(s,o);var r})),window.addEventListener("DOMContentLoaded",(async function(){Te=await we(),(0,ke.addCards)(Te),Te.forEach((e=>{Ae.includes(e.title)||Ae.push(e.title),Oe.includes(e.brand)||Oe.push(e.brand)}))}));const $e=document.querySelector(".order-list"),Ue=document.querySelector(".company-list"),He=document.querySelector(".footer__content-wrapper-cust"),Be=document.querySelector(".footer__content-wrapper-comp"),Je=document.querySelector(".icon-arrow-down-cust"),je=document.querySelector(".icon-arrow-down-comp"),Fe=document.querySelector(".footer__btn-up");function We(e,t,n,s){e.classList.contains(n)&&(e.classList.remove(n),t.classList.remove(s))}He.addEventListener("click",(function(){$e.classList.contains("order-list_active")?($e.classList.remove("order-list_active"),Je.classList.remove("icon-arrow-down-cust_active")):($e.classList.add("order-list_active"),Je.classList.add("icon-arrow-down-cust_active"),We(Ue,je,"company-list_active","icon-arrow-down-comp_active"))})),Be.addEventListener("click",(function(){Ue.classList.contains("company-list_active")?(Ue.classList.remove("company-list_active"),je.classList.remove("icon-arrow-down-comp_active")):(Ue.classList.add("company-list_active"),je.classList.add("icon-arrow-down-comp_active"),We($e,Je,"order-list_active","icon-arrow-down-cust_active"))})),window.addEventListener("scroll",(function(){const e=window.scrollY,t=document.documentElement.clientHeight;e>t&&(Fe.classList.add("footer__btn-up_active"),setTimeout((()=>Fe.classList.remove("footer__btn-up_active")),3e3))}));class Ke{static url="https://649060be1e6aa71680cb2478.mockapi.io/Brands";static async getBrandsImage(){return await fetch(this.url).then((e=>e.json())).catch((e=>console.log(e)))}}const Ye=document.querySelector(".brand__wrapper");!async function(){await Ke.getBrandsImage().then((e=>{e.forEach((e=>{!function(e,t){const n=document.createElement("a");n.classList.add("brand__inner");const s=document.createElement("img");s.src=e,s.setAttribute("alt",t),n.append(s),Ye.append(n)}(e.url,e.alt)}))}))}();ke=s("2bZdl");const ze=document.querySelector(".sidebar__list"),Pe=document.querySelector(".sidebar"),Re=document.querySelector(".cards__inner");let Ze;ze.addEventListener("click",(function(e){const t=e.target.textContent;Ve.hasOwnProperty(t)&&async function(e){Ze=await we(),Re.innerHTML=null;let t=[];Ze.forEach((n=>{n.title.toLowerCase().startsWith(e)&&t.push(n)})),(0,ke.addCards)(t),Pe.classList.remove("sidebar_active"),m(),c(null,null,null)}(Ve[t])}));const Ve={"Футболки":"майка","Обувь":"кроссовки","Брюки":"штаны","Байки":"байка","Верхняя одежда":"куртка"};
//# sourceMappingURL=index.1425375e.js.map
