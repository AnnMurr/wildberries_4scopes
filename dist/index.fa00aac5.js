var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},s=e.parcelRequire5951;null==s&&((s=function(e){if(e in t)return t[e].exports;if(e in n){var s=n[e];delete n[e];var o={id:e,exports:{}};return t[e]=o,s.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},e.parcelRequire5951=s);let o=0,r=0;function c(e,t,n){"fixed"===e&&(o=window.scrollY||document.documentElement.scrollTop,r=window.scrollX||document.documentElement.scrollLeft),body.style.position=e,body.style.width=t,body.style.overflowY=n,"fixed"!==e&&window.scrollTo(r,o)}const a=document.querySelector(".burger"),i=document.querySelector(".footer-bar__sidebar-btn"),l=document.querySelector(".sidebar"),u=document.querySelector(".sidebar .btn-close");function d(){l.classList.contains("sidebar_active")?(l.classList.remove("sidebar_active"),c(null,null,null)):(l.classList.add("sidebar_active"),c("fixed","100%","scroll"),m())}function m(){l.classList.contains("sidebar_active")?document.addEventListener("click",_):document.removeEventListener("click",_)}function _(e){l.contains(e.target)||a.contains(e.target)||i.contains(e.target)||(l.classList.remove("sidebar_active"),c(null,null,null),m())}a.addEventListener("click",d),i.addEventListener("click",d),u.addEventListener("click",(function(){l.classList.contains("sidebar_active")&&(l.classList.remove("sidebar_active"),c(null,null,null))}));var b=s("02iEE");const p=[{tag:"input",class:"user__input",attributes:[{required:!0},{placeholder:"Логин"},{type:"text"}]},{tag:"span",class:["error-message","error-message_registration-login"]},{tag:"input",class:"user__input",attributes:[{required:!0},{placeholder:"Пароль"},{type:"password"},{"data-input":"1"}]},{tag:"button",class:"btn-show-password",attributes:[{href:"#"},{"data-btn":"1"},{type:"button"}],text:"показать пароль"},{tag:"span",class:["error-message","error-message_registration-password-first"]},{tag:"input",class:"user__input",attributes:[{required:!0},{placeholder:"Повторите пароль"},{type:"password"},{"data-input":"2"}]},{tag:"button",class:"btn-show-password",attributes:[{href:"#"},{"data-btn":"2"},{type:"button"}],text:"показать пароль"},{tag:"span",class:["error-message","error-message_registration-password-second"]},{tag:"button",class:["btn","registration__btn"],content:"Зарегистрироваться",attributes:[{type:"submit"}]}],v=[{tag:"input",class:"user__login-input",attributes:[{required:!0},{placeholder:"Логин"},{type:"text"}]},{tag:"span",class:["error-message","error-message_login"]},{tag:"input",class:"user__login-input",attributes:[{required:!0},{placeholder:"Введите пароль"},{type:"password"},{"data-input":"input"}]},{tag:"button",class:"btn-show-password",attributes:[{href:"#"},{"data-btn":"password"},{type:"button"}],text:"показать пароль"},{tag:"span",class:["error-message","error-message_password"]},{tag:"button",class:["btn","login-btn"],content:"Войти",attributes:[{type:"submit"}]}];var g=s("3LgNA");function f(e,t){t.forEach((t=>{const n=document.createElement(t.tag);Array.isArray(t.class)&&t.class.length>0?t.class.forEach((e=>n.classList.add(e))):n.classList.add(t.class),t.id&&(n.id=t.id),t.text&&(n.textContent=t.text),t.content&&(n.textContent=t.content),t.dataset&&(n.dataset.data=t.dataset.data),t.attributes&&t.attributes.length>0&&t.attributes.forEach((e=>{const[t,s]=Object.entries(e)[0];n.setAttribute(t,s)})),e.appendChild(n)}))}function L(e,t,n){const s=document.createElement("form");s.classList.add(e),f(s,t),n.appendChild(s)}g=s("3LgNA"),b=s("02iEE"),g=s("3LgNA");function y(){g.UsersStore.removeTokenStore(),localStorage.setItem("basketStore",JSON.stringify([])),location.reload()}const S=document.querySelector(".user__submenu");async function h(e){const t=await b.AuthenticationApi.getUserByToken(e);if(t){const e=S.children;S.removeChild(e[1]),S.removeChild(e[1]),e[0].querySelector(".modal-header__title > h2").textContent=`Здравствуйте, ${t.login}!`;const n=document.createElement("button");n.type="button",n.classList.add("btn","user__submenu-btn-exit"),n.textContent="Выйти из аккаунта",S.appendChild(n),n.addEventListener("click",y)}}const w=document.querySelector(".user-btn");function k(){const e=g.UsersStore.getTokenStore();e?(h(e),w.classList.add("user-btn_authorized")):w.classList.remove("user-btn_authorized")}function E(e,t){const n=document.querySelector(e).parentNode;n.innerHTML=null;const s=document.createElement("div"),o=document.createElement("span");s.classList.add("success-container"),o.classList.add("success-message"),o.textContent=t,s.appendChild(o),n.append(s),setTimeout((function(){n.remove()}),3e3)}var q=s("77CKc");const C=document.querySelector(".user__registration"),x=document.querySelector(".user__registration-btn-close"),T=document.querySelector(".user__submenu-btn-registration"),A=document.querySelector(".user-btn");function O(){C.classList.add("user__registration_active"),C.classList.contains("user__registration_active")&&(document.addEventListener("click",N),A.classList.add("user-btn_active"),document.querySelector(".registration__btn").addEventListener("click",M))}function N(e){C.contains(e.target)||T.contains(e.target)||C.classList.remove("user__registration_active"),C.classList.contains("user__registration_active")||(document.removeEventListener("click",N),A.classList.remove("user-btn_active"),registrationForm=document.querySelector(".user__registration-form"),registrationForm&&(registrationForm.reset(),document.querySelector('[data-input="1"]').type="password",document.querySelector('[data-input="2"]').type="password",document.querySelector('[data-btn="1"]').textContent="показать пароль",document.querySelector('[data-btn="2"]').textContent="показать пароль",U()))}function U(){const e=document.querySelector(".error-message_registration-login"),t=document.querySelector(".error-message_registration-password-first"),n=document.querySelector(".error-message_registration-password-second");e.textContent=null,t.textContent=null,n.textContent=null}function M(e){e.preventDefault(),async function(){let e=document.querySelectorAll(".user__input"),t=[];const n=document.querySelector(".error-message_registration-login"),s=document.querySelector(".error-message_registration-password-first"),o=document.querySelector(".error-message_registration-password-second");e.forEach((e=>t.push(e.value)));const r={login:t[0],password:t[1],token:Math.random()*(new Date).getTime()};let c=await b.AuthenticationApi.getUserByLogin(r.login);const a=(e,t,n,s)=>e.textContent=`${s} должен содержать от ${t} до ${n} символов`,i=r.password.length,l=r.login.length;r.login.match(/[!@#$%^&*()[\]{}|\\;:'"<>.,\/?`~=+\-№_]/)?n.textContent="Логин не должен содержать пробелы и символы: !@#$%^&*()-_+={}[]|\\;:'\"<>.,/?`~№":i<8||i>20?a(s,8,20,"Пароль"):l<3||l>20?a(n,3,20,"Логин"):t[1]!==t[2]?(s.textContent="Пароль не совпадает",o.textContent="Пароль не совпадает"):void 0!==c?n.textContent=`Пользователь с логином "${r.login}" уже зарегистрирован`:(b.AuthenticationApi.setUser(r.login,r.password,r.token).then((()=>E(".user__registration-form","Регистрация прошла успешно ☑"))),g.UsersStore.setTokenStore(r.token),setTimeout((()=>{k(),(0,q.linkStoreToUserData)()}),3e3))}(),U()}x.addEventListener("click",(function(){C.classList.remove("user__registration_active")})),document.addEventListener("DOMContentLoaded",(function(){L("user__registration-form",p,C),function(){const e=document.querySelector('[data-input="1"]'),t=document.querySelector('[data-input="2"]'),n=document.querySelector('[data-btn="1"]'),s=document.querySelector('[data-btn="2"]');document.querySelectorAll(".btn-show-password").forEach((o=>{o.addEventListener("click",(function(o){let r="1"===o.target.getAttribute("data-btn")?e:t,c="password"===r.type?"text":"password";r.type=c;let a="1"===o.target.getAttribute("data-btn")?n:s,i="показать пароль"===a.textContent?"скрыть пароль":"показать пароль";a.textContent=i}))}))}(),k()}));b=s("02iEE"),g=s("3LgNA");var D=s("7h1G2");const I=document.querySelector(".user__login"),$=document.querySelector(".user__login-btn-close"),H=document.querySelector(".user__submenu-btn-login"),J=document.querySelector(".user-btn");function B(){I.classList.add("user__login_active"),I.classList.contains("user__login_active")&&document.addEventListener("click",j),J.classList.add("user-btn_active"),document.querySelector(".login-btn").addEventListener("click",W)}function j(e){I.contains(e.target)||H.contains(e.target)||I.classList.remove("user__login_active"),I.classList.contains("user__login_active")||(document.removeEventListener("click",j),J.classList.remove("user-btn_active"),function(){const e=document.querySelector(".user__login-form");if(e){e.reset();document.querySelector('[data-btn="password"]').textContent="показать пароль",document.querySelector('[data-input="input"]').type="password";F()}}())}function F(){const e=document.querySelector(".error-message_login"),t=document.querySelector(".error-message_password");e.textContent=null,t.textContent=null}function W(e){e.preventDefault(),async function(){let e=document.querySelectorAll(".user__login-input"),t=[];const n=document.querySelector(".error-message_login"),s=document.querySelector(".error-message_password");e.forEach((e=>{t.push(e.value)}));let o=await b.AuthenticationApi.getUserByLogin(t[0]);o&&o.password===t[1]?(E(".user__login-form","Вы вошли ✓"),D.AlertService.access("Вы вошли ✓"),g.UsersStore.setTokenStore(o.token),localStorage.setItem("basketStore",JSON.stringify(o.orders)),k()):(n.textContent="Неверный логин или пароль",s.textContent="Неверный логин или пароль")}(),F()}$.addEventListener("click",(function(){I.classList.remove("user__login_active"),J.classList.remove("user-btn_active")})),document.addEventListener("DOMContentLoaded",(function(){L("user__login-form",v,I),function(){const e=document.querySelector('[data-btn="password"]'),t=document.querySelector('[data-input="input"]');e.addEventListener("click",(function(){neededType="password"===t.type?"text":"password",t.type=neededType,neededText="показать пароль"===e.textContent?"скрыть пароль":"показать пароль",e.textContent=neededText}))}()}));const K=document.querySelector(".user-btn"),Y=document.querySelector(".user__submenu"),z=document.querySelector(".user__submenu-btn-close"),G=document.querySelector(".user__submenu-btn-registration"),P=document.querySelector(".user__submenu-btn-login"),R=document.querySelector(".footer-bar__user");function Z(){Y.classList.contains("user__submenu_active")?(K.classList.add("user-btn_active"),document.addEventListener("click",V)):(K.classList.remove("user-btn_active"),document.removeEventListener("click",V))}function V(e){Y.contains(e.target)||K.contains(e.target)||R.contains(e.target)||e.target.classList.contains("basket__btn-order")||(Y.classList.remove("user__submenu_active"),Z())}K.addEventListener("click",(function(){Y.classList.toggle("user__submenu_active"),Z()})),z.addEventListener("click",(function(){Y.classList.remove("user__submenu_active"),Z()})),G.addEventListener("click",(function(){Y.classList.remove("user__submenu_active"),Z(),O()})),P.addEventListener("click",(function(){Y.classList.remove("user__submenu_active"),Z(),B()}));const X=document.querySelector(".footer-bar__user"),Q=document.querySelector(".user__submenu"),ee=document.querySelectorAll(".btn-close"),te=document.querySelector(".user__registration"),ne=document.querySelector(".user__login");X.addEventListener("click",(function(){Q.classList.contains("user__submenu_active")||te.classList.contains("user__registration_active")||ne.classList.contains("user__login_active")?Q.classList.contains("user__submenu_active")&&(Q.classList.remove("user__submenu_active"),c(null,null,null),Z()):(Q.classList.add("user__submenu_active"),c("fixed","100%","scroll"),Z())})),ee.forEach((e=>e.addEventListener("click",(()=>c(null,null,null)))));q=s("77CKc"),g=s("3LgNA"),D=s("7h1G2");const se=document.querySelector(".basket__modal"),oe=document.querySelector(".footer-bar__basket-btn");function re(){const e=le();se.classList.contains("basket__modal_active")?se.classList.remove("basket__modal_active"):(e.length>0?(ue(),_e("block","flex"),ve()):(ue(),_e("none","none")),se.classList.add("basket__modal_active"),ae())}function ce(){const e=document.querySelector(".basket-block");se.classList.remove("basket__modal_active"),e.innerHTML=null,c(null,null,null)}function ae(){se.classList.contains("basket__modal_active")?document.addEventListener("click",ie):document.removeEventListener("click",ie)}function ie(e){se.contains(e.target)||e.target.classList.contains("basket-btn")||e.target.classList.contains("basket__list-item-btn-remove")||oe.contains(e.target)||(se.classList.remove("basket__modal_active"),ae())}function le(){const e=localStorage.getItem("basketStore");return JSON.parse(e)||[]}function ue(){const e=document.querySelector(".basket-block"),t=document.createElement("ul");t.classList.add("basket__list"),e.appendChild(t),de("☹<br>Корзина пуста")}function de(e){const t=le(),n=document.querySelector(".basket__list");0===t.length?n.innerHTML=e:(n.textContent=null,t.forEach((e=>{n.append(function(e){const t=document.createElement("li");t.classList.add("basket__list-item");const n=function(){const e=document.createElement("div");return e.classList.add("basket__list-item-wrapper"),e}();return n.append(function(e){const t=document.createElement("div");t.classList.add("basket__list-item-price");const n=document.createElement("h5");return n.textContent=""+(e.price+"$"),t.append(n),t}(e),function(e){const t=document.createElement("button");return t.classList.add("icon-trash","basket__list-item-btn-remove"),t.setAttribute("data-id",`${e.id}`),t.addEventListener("click",me),t}(e)),t.append(function(e){const t=document.createElement("div");t.classList.add("basket__list-item-title");const n=document.createElement("h5");return n.textContent=`${e.title}`,t.append(n),t}(e),n),t}(e))})))}function me(e){const t=document.querySelector(".basket__list");if(e.target.classList.contains("basket__list-item-btn-remove")){!function(e){let t=localStorage.getItem("basketStore");if(t){let n=JSON.parse(t);const s=n.findIndex((t=>t.id===e));-1!==s&&(n.splice(s,1),localStorage.setItem("basketStore",JSON.stringify(n)),(0,q.linkStoreToUserData)())}}(e.target.dataset.id),e.target.closest(".basket__list-item").remove(),D.AlertService.warning("Товар удалён из корзины"),ge(),ve()}0===t.children.length&&(de("☹<br>Корзина пуста"),_e("none","none"))}function _e(e,t){const n=document.querySelector(".basket__btn-delete-all"),s=document.querySelector(".basket__footer");n.style.display=e,s.style.display=t}function be(){const e=document.querySelectorAll(".basket__list-item");localStorage.setItem("basketStore",JSON.stringify([])),e.forEach((e=>e.remove())),de("☹<br>Корзина пуста"),(0,q.linkStoreToUserData)(),D.AlertService.warning("Корзина очищена!"),_e("none","none")}function pe(){const e=document.querySelector(".user__submenu");g.UsersStore.getTokenStore()?(localStorage.setItem("basketStore",JSON.stringify([])),(0,q.linkStoreToUserData)(),_e("none","none"),de("Заказ успешно создан 📦")):(se.classList.remove("basket__modal_active"),e.classList.add("user__submenu_active"),Z())}function ve(){const e=document.querySelector(".basket__total-price-value"),t=ge();e.innerText=` ${t} $`}function ge(){const e=JSON.parse(localStorage.getItem("basketStore"));let t=0;return e.forEach((e=>{t+=e.price})),t}oe.addEventListener("click",re),oe.addEventListener("click",(function(){se.classList.contains("basket__modal_active")?c("fixed","100%","scroll"):c(null,null,null)})),document.addEventListener("DOMContentLoaded",(function(){!function(){const e=document.createElement("div");e.classList.add("modal-header"),e.innerHTML='\n\t\t<div class="modal-header__title">\n\t\t<h2>Корзина</h2>\n\t\t</div>\n\t\t<button class="btn-close basket__modal-btn-close"></button>\n\t\t',se.appendChild(e);document.querySelector(".basket__modal-btn-close").addEventListener("click",ce)}(),function(){const e=document.createElement("div");e.classList.add("basket-block"),se.appendChild(e)}(),function(){const e=document.createElement("button");e.classList.add("btn","basket__btn-delete-all"),e.innerText="Очистить корзину",e.addEventListener("click",be),se.appendChild(e)}(),function(){const e=le(),t=document.createElement("div");t.classList.add("basket__footer"),t.innerHTML='\n\t<button type="button" class="btn basket__btn-order">Заказать</button>\n\t <div class="basket__total-price">\n\t  <h4 class="basket__total-price-title">Итого:</h4>\n\t  <h4 class="basket__total-price-value"></h4>\n\t </div>\n\t',se.appendChild(t);document.querySelector(".basket__btn-order").addEventListener("click",pe),0===e.length&&_e("none","none")}(),document.querySelector(".basket-btn").addEventListener("click",re)}));class fe{static imagesUrlApi="https://646e07219c677e23218ae1e2.mockapi.io/users/images";static async getImages(){return await fetch(this.imagesUrlApi).then((e=>e.json())).catch((e=>console.error(`Произошла ошибка при загрузке изображения: ${e}`)))}}const Le=document.querySelector(".swiper-wrapper");function ye(e){Le.appendChild(e),new Swiper(".mySwiper",{slidesPerView:1,spaceBetween:0,loop:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},autoplay:{delay:2e3,disableOnInteraction:!0},speed:1500})}document.addEventListener("DOMContentLoaded",(async function(){await fe.getImages().then((e=>{e.forEach((e=>{!function(e,t){const n=document.createElement("div");n.classList.add("swiper-slide");const s=document.createElement("img");s.alt=t,s.src=e,s.loading="eager",n.append(s),ye(n)}(e.url,e.alt)}))})).catch((e=>{throw e}))}));var Se=s("8fKNq");function he(){return fetch("https://646f451109ff19b12086e48a.mockapi.io/wildberries/cards").then((e=>e.json())).then((e=>(Se.CardsStore.setCards(e),e))).catch((e=>{throw e}))}var we=s("2bZdl");const ke=document.querySelector(".search"),Ee=document.querySelector(".search__input"),qe=document.querySelector(".search-btn"),Ce=document.querySelector(".cards__inner");let xe,Te=[],Ae=[];function Oe(){document.querySelector(".search__list")&&document.addEventListener("click",Ne)}function Ne(e){if(e.target!==Ee){let e=document.querySelector(".search__list");e&&e.remove(),document.removeEventListener("click",Ne)}}function Ue(e){Ce.innerHTML=null;let t=[];xe.forEach((n=>{n.title.toLowerCase().startsWith(e.toLowerCase())&&t.push(n)})),(0,we.addCards)(t)}function Me(e,t){e.forEach((e=>{const n=document.createElement("li");n.classList.add("search__list-item"),n.textContent=e,t.appendChild(n),document.querySelectorAll(".search__list-item").forEach((e=>{e.addEventListener("click",(function(e){Ce.innerHTML=null;const t=e.target.textContent;let n=[];xe.forEach((e=>{e.title.toLowerCase()===t.toLowerCase()&&n.push(e),e.brand.toLowerCase()===t.toLowerCase()&&n.push(e)})),(0,we.addCards)(n)}))}))}))}Ee.addEventListener("input",(function(e){let t=e.target.value,n=Te.filter((e=>e.toLowerCase().startsWith(t.toLowerCase()))),s=Ae.filter((e=>e.toLowerCase().startsWith(t.toLowerCase()))),o=document.querySelector(".search__list");if(!t)return void(o&&(o.remove(),Oe()));o?o.innerHTML=null:(o=document.createElement("ul"),o.classList.add("search__list"),ke.appendChild(o),Oe());r=t,Ee.addEventListener("keyup",(e=>{"Enter"===e.code&&(Ue(r),Ne({target:document}))})),qe.addEventListener("click",(()=>Ue(t))),Me(n,o),Me(s,o);var r})),window.addEventListener("DOMContentLoaded",(async function(){xe=await he(),(0,we.addCards)(xe),xe.forEach((e=>{Te.includes(e.title)||Te.push(e.title),Ae.includes(e.brand)||Ae.push(e.brand)}))}));const De=document.querySelector(".order-list"),Ie=document.querySelector(".company-list"),$e=document.querySelector(".footer__content-wrapper-cust"),He=document.querySelector(".footer__content-wrapper-comp"),Je=document.querySelector(".icon-arrow-down-cust"),Be=document.querySelector(".icon-arrow-down-comp"),je=document.querySelector(".footer__btn-up");function Fe(e,t,n,s){e.classList.contains(n)&&(e.classList.remove(n),t.classList.remove(s))}$e.addEventListener("click",(function(){De.classList.contains("order-list_active")?(De.classList.remove("order-list_active"),Je.classList.remove("icon-arrow-down-cust_active")):(De.classList.add("order-list_active"),Je.classList.add("icon-arrow-down-cust_active"),Fe(Ie,Be,"company-list_active","icon-arrow-down-comp_active"))})),He.addEventListener("click",(function(){Ie.classList.contains("company-list_active")?(Ie.classList.remove("company-list_active"),Be.classList.remove("icon-arrow-down-comp_active")):(Ie.classList.add("company-list_active"),Be.classList.add("icon-arrow-down-comp_active"),Fe(De,Je,"order-list_active","icon-arrow-down-cust_active"))})),window.addEventListener("scroll",(function(){window.scrollY>document.documentElement.clientHeight&&(je.classList.add("footer__btn-up_active"),setTimeout((()=>je.classList.remove("footer__btn-up_active")),3e3))}));class We{static url="https://649060be1e6aa71680cb2478.mockapi.io/Brands";static async getBrandsImage(){return await fetch(this.url).then((e=>e.json())).catch((e=>console.log(e)))}}const Ke=document.querySelector(".brand__wrapper");!async function(){await We.getBrandsImage().then((e=>{e.forEach((e=>{!function(e,t){const n=document.createElement("a");n.classList.add("brand__inner");const s=document.createElement("img");s.src=e,s.setAttribute("alt",t),n.append(s),Ke.append(n)}(e.url,e.alt)}))}))}();we=s("2bZdl");const Ye=document.querySelector(".sidebar__list"),ze=document.querySelector(".sidebar"),Ge=document.querySelector(".cards__inner");let Pe;Ye.addEventListener("click",(function(e){const t=e.target.textContent;Re.hasOwnProperty(t)&&async function(e){Pe=await he(),Ge.innerHTML=null;let t=[];Pe.forEach((n=>{n.title.toLowerCase().startsWith(e)&&t.push(n)})),(0,we.addCards)(t),ze.classList.remove("sidebar_active"),m(),c(null,null,null)}(Re[t])}));const Re={"Футболки":"майка","Обувь":"кроссовки","Брюки":"штаны","Байки":"байка","Верхняя одежда":"куртка"};
//# sourceMappingURL=index.fa00aac5.js.map
